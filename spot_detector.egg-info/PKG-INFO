Metadata-Version: 2.1
Name: spot-detector
Version: 2024.1.0
Summary: FR: Une application en CLI configurable qui compte les points dans des images
Author-email: Louis Lanoy <louis.lanoy@icloud.com>
Project-URL: Homepage, https://github.com/Peanut-XIV/spot-detector
Project-URL: Issues, https://github.com/Peanut-XIV/spot-detector/issues
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: opencv-python>=4.9.0.80
Requires-Dist: numpy>=1.26.3
Requires-Dist: scipy>=1.11.4
Requires-Dist: pydantic>=2.5.3
Requires-Dist: click>=8.1.7
Requires-Dist: tomlkit>=0.11.3

# Spot Detector

---

## Introduction :

Spot detector est un programme √©crit en septembre et octobre 2023 dans l'objectif de compter des luminophores 
dans des boites de P√©tri. Il utilise la biblioth√®que OpenCV 2 ainsi que Numpy afin de manipuler des images. 

Ce programme prend en entr√©e un chemin de dossier de travail, un chemin de fichier csv, un ensemble
de valeurs de profondeur et un format de nom d'image. 

En retour, il produit un document CSV contenant le nombre de luminophores dans chacune des images pr√©sentes dans le 
dossier de travail, ainsi que le pourcentage par rapport au total dans un sous-dossier. Diff√©rentes colonnes 
correspondent √† diff√©rentes profondeurs et couleurs de luminophores. 

Par exemple, le tableau peut prendre la forme suivante :

|                      | Nbr Orange |     |     |     | Nbr Vert |     | Nbr Orange+Vert |     | %ge Orange |     |
|:---------------------|-----------:|----:|----:|----:|---------:|----:|----------------:|----:|-----------:|----:|
| Dossier / Profondeur |        0.0 | 0.2 | ... | 2.0 |      0.0 | ... |             0.0 | ... |        0.0 | ... |
| experience1_rep10    |     11 200 | 234 | ... |   1 |      724 | ... |          11 924 | ... |  99.8753 % | ... |
| experience2_rep4     |      9 371 | 192 | ... |   0 |      338 | ... |           9 709 | ... |  98.7927 % | ... |
| experience2_rep5     |        ... | ... | ... | ... |      ... | ... |             ... | ... |        ... | ... |

---

## Installation :

Pour l'instant, l'installation du programme se fait en clonant le projet localement, via l'invite de commande.

#### sur MacOS :

Ouvrez le Finder et allez dans le dossier `Applications/Utilitaires` et double-cliquez sur `Terminal`.
Puis entrez
```
cd ~

git clone
```

## Comment l'utiliser :


### Le dossier de travail

Le dossier de travail doit avoir la structure suivante :

```
.../dossier_principal/
    |- test_1_replicat_1/
    |   |- image_1.jpeg
    |   |- image_2.jpeg
    |   |- image_3.jpeg
    |   |- ...
    |
    |- test_1_replicat_2/
    |   |- image_1.jpeg
    |   |- image_2.jpeg
    |   |- image_3.jpeg
    |   |- ...
    |
    |- ...
    |
    |- test_X_replicat_Y/
        |- image_1.jpeg
        |- image_2.jpeg
        |- image_3.jpeg
        |- ...
```

Les noms de dossiers, nom et formats d'images sont √† but explicatif, l'important est qu'il n'y ait pas de 
sous-sous-dossier. Aussi, les images dans des arborescences sup√©rieures ous inf√©rieures ne seront pas trait√©es.
Ces sous-dossiers constituent le premier axe du tableau avec leur nom comme nom de ligne.

Par ailleurs, il est pr√©f√©rable que le nombre d'images soit le m√™me dans chaque dossier. Sinon, il est possible 
d'utiliser une r√®gle de tri que l'on verra plus tard. Dans ce cas, si une image manque, la valeur associ√©e vaudra 0.

### Le chemin de fichier CSV

Le chemin de fichier CSV indique au programme o√π √©crire les donn√©es qu'il vient de calculer. Il est recommand√© 
d'indiquer un fichier inexistant et que l'extension soit ".csv". Cependant, si le programme a √©t√© interrompu et que 
certains dossiers n'ont pas encore √©t√© trait√©s, il est possible de reprendre l√† o√π le programme s'est arr√™t√©, il suffit 
d'indiquer le nom de chemin du fichier inachev√©. Dans ce cas, il cherchera les noms de dossiers d√©j√† pr√©sents et ne les 
traitera pas.

> ‚ö†Ô∏è **Avertissement** : Le programme ne fait pas la diff√©rence entre un fichier .csv quelconque et un fichier qu'il a 
> √©crit lui-m√™me. Pour cette raison, prenez garde √† bien indiquer un fichier que vous √™tes s√ªr de vouloir modifier !
> (Il n'y a pas de risque important en soi, le programme ne peut qu'ajouter des lignes, pas les r√©√©crire ou les 
> supprimer.)

### Les valeurs de "profondeur"

Ces valeurs sont appel√©es profondeurs puisque c'est cette grandeur qui √©tait indiqu√©e dans l'exp√©rience pour laquelle 
le programme a √©t√© √©crit. Il s'agit du deuxi√®me axe du tableau, les valeurs entr√©es serviront de noms de colonne. 
Elles sont √©galement utilis√©es pour identifier les images par profondeur gr√¢ce √† leur nom de fichier lors du traitement. 
Pour cela, il est important que ces valeurs soient coh√©rentes par rapport au nom des images et coh√©rent d'une image √† 
l'autre.

Ces valeurs doivent √™tre s√©par√©es par des espaces ou autres caract√®res similaires et peuvent contenir n'importe quel 
symbole du moment que ce n'est pas un espace, naturellement. Par ailleurs, les caract√®res doivent √™tre 
compatibles avec votre syst√®me de fichiers.

### Le format de nom d'image

Le format de nom d'image est utile si les images, lorsqu'elles sont tri√©es par profondeur, n'apparaissent pas dans 
l'ordre alphab√©tique. Sinon, ce format permet de prendre en compte le fait que certaines images soient manquantes. 
Ce format indique les parties invariantes, variantes ou qui contiennent la profondeur entre les noms 
de fichier des diff√©rentes images. Dans le cas pour lequel le programme a √©t√© √©crit, les images avaient ce genre de nom :

`A6_1 0.4-0.6.JPG` `C30_4 0.6-0.8.JPG` `Cb2 0.0-0.2.JPG`

De mani√®re g√©n√©rale, ils sont compos√©s comme la s√©quence suivante :

| Caract√®res     | `A6_1`                                                                                            | ` `                                                                                           | `0.4`                                          | ` ` `-` ` `                                                                                                                                                                                                                                                         | `0.6`                                                                                    | `.JPG`             |
|----------------|---------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|--------------------|
| description    | une lettre majuscule, suivie ou non d'un chiffre, suivi ou non d'un tiret bas, suivi d'un chiffre | un espace                                                                                     | une valeur de profondeur                       | un tiret ou un tiret entour√© d'espaces                                                                                                                                                                                                                              | la valeur de profondeur suivante                                                         | le nom d'extension |
| repr√©sentation | `*` permet de repr√©senter n'importe quelle chaine de caract√®res                                   | √Ä l'exception de `*` `?` `[` `]` `{` `}`, tous les caract√®res sont interpr√©t√©s litt√©ralement. | `{}` insert la valeur de profondeur recherch√©e | `[ -]` : Les symboles entre crochets indiquent un ensemble de possibilit√©s pour un caract√®re. Attention, entre crochets, le tiret peut avoir un autre sens : `[a-zA-Z0-9]` indique n'importe quel caract√®re entre `a` et `z`, entre `A` et `Z` ou entre `0` et `9`. | `*` : on ne peut pas indiquer la valeur de profondeur de mani√®re simple, d'o√π l'√©toile.  | `.JPG`             |

Mis bouts-√†-bouts, les √©l√©ments donnent la s√©quence suivante : `* {}[ -]*.JPG`.

> üìù **Note** : La repr√©sentation de format est faite avec la m√©thode `str.format()` et la m√©thode de chemin `Path.glob()`.
Pour en savoir plus, voir la documentation de [Format String Syntax](https://docs.python.org/3/library/string.html#formatstrings) et 
[Path.glob](https://docs.python.org/3/library/pathlib.html?highlight=pathlib%20glob#pathlib.Path.glob) sur le site officiel 
du langage Python.


### D√©roulement de l'ex√©cution



---

## Le fonctionnement de la d√©tection de point :
